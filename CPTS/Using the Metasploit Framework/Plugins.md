# Plugins ‡πÉ‡∏ô Metasploit

## Plugins ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

**Plugins** ‡∏Ñ‡∏∑‡∏≠‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏° ‡πÅ‡∏•‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏£‡∏ß‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö Metasploit Framework ‡πÇ‡∏î‡∏¢‡∏°‡∏µ 2 ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:

1. **‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå** - ‡∏°‡∏µ Community Edition ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏ü‡∏£‡∏µ ‡πÅ‡∏ï‡πà‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î
2. **‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•** - ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏≠‡∏¥‡∏™‡∏£‡∏∞

---

## ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Plugins?

### ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏´‡∏•‡∏±‡∏Å:

‚úÖ **‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï Pentester ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô** - ‡∏ô‡∏≥‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå‡∏ó‡∏µ‡πà‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏Å‡∏±‡∏ô‡∏î‡∏µ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô msfconsole  
‚úÖ **‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°** - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á import/export ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏°‡∏≤  
‚úÖ **‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥** - ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô database ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥  
‚úÖ **‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ** - hosts, services, vulnerabilities ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ  
‚úÖ **‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á** - ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° framework ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏î‡πâ  

### ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:

- **Automate ‡∏á‡∏≤‡∏ô‡∏ã‡πâ‡∏≥‡πÜ** - ‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡πÄ‡∏ö‡∏∑‡πà‡∏≠
- **‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡∏°‡πà** - ‡∏Ç‡∏¢‡∏≤‡∏¢ msfconsole ‡πÉ‡∏´‡πâ‡∏ó‡∏£‡∏á‡∏û‡∏•‡∏±‡∏á‡∏Ç‡∏∂‡πâ‡∏ô
- **Extend Framework** - ‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß

---

## ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Plugins

### 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Plugins ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á Plugins:**
```bash
ls /usr/share/metasploit-framework/plugins
```

**‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Plugins ‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á:**
```
aggregator.rb       komand.rb          request.rb           sounds.rb
alias.rb            lab.rb             rssfeed.rb           sqlmap.rb
auto_add_route.rb   libnotify.rb       sample.rb            thread.rb
beholder.rb         msfd.rb            session_notifier.rb  token_adduser.rb
db_credcollect.rb   msgrpc.rb          session_tagger.rb    token_hunter.rb
db_tracker.rb       nessus.rb          socket_logger.rb     wiki.rb
event_tester.rb     nexpose.rb         
ffautoregen.rb      openvas.rb
ips_filter.rb       pcap_log.rb
```

### 2. ‡πÇ‡∏´‡∏•‡∏î Plugin

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡πÇ‡∏´‡∏•‡∏î Nessus Plugin**

```
msf6 > load nessus

[*] Nessus Bridge for Metasploit
[*] Type nessus_help for a command listing
[*] Successfully loaded Plugin: Nessus
```

**‡∏î‡∏π‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ:**

```
msf6 > nessus_help

Command                     Help Text
-------                     ---------
Generic Commands            
-----------------           
nessus_connect              Connect to a Nessus server
nessus_logout               Logout from the Nessus server
nessus_login                Login into the connected Nessus server
nessus_user_add             Create a new Nessus User
nessus_user_del             Delete a Nessus User
nessus_user_passwd          Change Nessus Users Password

Policy Commands             
-----------------           
nessus_policy_list          List all policies
nessus_policy_del           Delete a policy
```

### 3. ‡∏Å‡∏£‡∏ì‡∏µ Plugin ‡πÑ‡∏°‡πà‡∏û‡∏ö

```
msf6 > load Plugin_That_Does_Not_Exist

[-] Failed to load plugin from /usr/share/metasploit-framework/plugins/Plugin_That_Does_Not_Exist.rb: 
cannot load such file
```

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** Plugin ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

---

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Plugins ‡πÉ‡∏´‡∏°‡πà

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á:

1. **Plugins ‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å Parrot OS** - ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏° distro updates
2. **Custom Plugins** - ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå `.rb` ‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á DarkOperator's Metasploit-Plugins

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: Clone Repository**

```bash
git clone https://github.com/darkoperator/Metasploit-Plugins
```

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î**

```bash
ls Metasploit-Plugins

aggregator.rb       ips_filter.rb       pcap_log.rb          sqlmap.rb
alias.rb            komand.rb           pentest.rb           thread.rb
auto_add_route.rb   lab.rb              request.rb           token_adduser.rb
beholder.rb         libnotify.rb        rssfeed.rb           token_hunter.rb
db_credcollect.rb   msfd.rb             sample.rb            twitt.rb
db_tracker.rb       msgrpc.rb           session_notifier.rb  wiki.rb
event_tester.rb     nessus.rb           session_tagger.rb    wmap.rb
ffautoregen.rb      nexpose.rb          socket_logger.rb
growl.rb            openvas.rb          sounds.rb
```

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: Copy Plugin ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå MSF**

```bash
sudo cp ./Metasploit-Plugins/pentest.rb /usr/share/metasploit-framework/plugins/pentest.rb
```

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡πÄ‡∏£‡∏¥‡πà‡∏° msfconsole ‡πÅ‡∏•‡∏∞‡πÇ‡∏´‡∏•‡∏î Plugin**

```bash
msfconsole -q
```

```
msf6 > load pentest

       ___         _          _     ___ _           _
      | _ \___ _ _| |_ ___ __| |_  | _ \ |_  _ __ _(_)_ _
      |  _/ -_) ' \  _/ -_|_-<  _| |  _/ | || / _` | | ' \ 
      |_| \___|_||_\__\___/__/\__| |_| |_|\_,_\__, |_|_||_|
                                              |___/
      
Version 1.6
Pentest Plugin loaded.
by Carlos Perez (carlos_perez[at]darkoperator.com)
[*] Successfully loaded plugin: pentest
```

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏î‡∏π‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤**

```
msf6 > help
```

---

## ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å Pentest Plugin

### 1. **Tradecraft Commands**
```
check_footprint      Checks the possible footprint of a post module on a target system
```

### 2. **auto_exploit Commands**
```
show_client_side     Show matched client side exploits from data imported from vuln scanners
vuln_exploit         Runs exploits based on data imported from vuln scanners
```

### 3. **Discovery Commands**
```
discover_db                 Run discovery modules against current hosts in the database
network_discover            Performs a port-scan and enumeration of services found
pivot_network_discover      Performs enumeration of networks available to a Meterpreter session
show_session_networks       Enumerate the networks one could pivot thru Meterpreter
```

### 4. **Project Commands**
```
project              Command for managing projects
```

### 5. **Postauto Commands**
```
app_creds            Run application password collection modules against sessions
get_lhost            List local IP addresses that can be used for LHOST
multi_cmd            Run shell command against several sessions
multi_meter_cmd      Run a Meterpreter Console Command against specified sessions
multi_meter_cmd_rc   Run resource file with Meterpreter Console Commands
multi_post           Run a post module against specified sessions
multi_post_rc        Run resource file with post modules and options
sys_creds            Run system password collection modules against sessions
```

---

## ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Plugins ‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°

### ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏° (Pre-installed):

| Plugin | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ |
|--------|----------|
| **nMap** | Integration ‡∏Å‡∏±‡∏ö Nmap scanner |
| **NexPose** | Vulnerability scanner integration |
| **Nessus** | Vulnerability scanner integration |
| **Mimikatz (V.1)** | Credential extraction tool |
| **Stdapi** | Standard API functions |
| **Incognito** | Token manipulation |

### ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ:

| Plugin | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ |
|--------|----------|
| **Railgun** | Windows API access |
| **Priv** | Privilege escalation |
| **Darkoperator's** | Collection of useful plugins |

---

## Mixins - ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á

### Mixins ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

**Mixins** ‡πÄ‡∏õ‡πá‡∏ô feature ‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏©‡∏≤ Ruby ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ Metasploit ‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡∏°‡∏≤‡∏Å:

- ‡πÄ‡∏õ‡πá‡∏ô **classes ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô methods** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö classes ‡∏≠‡∏∑‡πà‡∏ô
- **‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡∏ö‡∏ó‡∏≠‡∏î (inheritance)** ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£ **‡∏£‡∏ß‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ (inclusion)**
- ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á `include` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ module

### ‡πÉ‡∏ä‡πâ Mixins ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà?

1. **‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ optional features ‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö class
2. **‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ feature ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô** ‡∏Å‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢ classes

### ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:

```ruby
# ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Mixin
include ModuleName  # ‡∏£‡∏ß‡∏° Module ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö class
```

### ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô:

‚ö†Ô∏è **‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏á‡∏ß‡∏•** - ‡∏ñ‡πâ‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ Metasploit ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à Mixins ‡∏•‡∏∂‡∏Å‡∏ã‡∏∂‡πâ‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ  
üí° **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô** - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Plugins ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß  
üìö **‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á** - ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ customize ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á plugins ‡πÄ‡∏≠‡∏á

---

